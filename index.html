<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>肩スコア</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!---------------------------------------- ここに style ---------------------------------------->
  <style>

label {
  display: inline-block;   /* 横並びだけどブロック扱い */
  margin: 5px 0;
  white-space: normal;     /* 折り返しOK */
  word-break: break-word;  /* 長い単語でも折り返す */
}
fieldset {
  max-width: 100%;         /* 親幅を超えない */
}
    body {
      display: flex;
      flex-direction: column;   /* 縦方向に並べる */
      align-items: center;      /* 横中央 */
      height: 100vh;
      margin: 0;
      font-family: sans-serif;
    }
    h1 {
      font-size: 3em;
      margin-bottom: 20px;     /* タイトルとボタンの間隔 */}
    button {
      font-size: 1.5em;        /* ボタン文字大きめ */
      padding: 15px 30px;      /* 内側余白 */
      border-radius: 10px;     /* 角を丸く */
      border: none;            /* 枠線消す */
      background-color: #007bff; /* 青色 */
      color: white;            /* 文字は白 */
}
    button:active {background-color: #0056b3; /* 押したときに少し濃い色 */}
.section {display: none;   /* 基本は非表示 */}
.active {display: block;  /* 表示するやつだけ block */
  .redButton {
    background-color: red;
    color: white;
  }
  .redButton:active {
    background-color: darkred;
  }
  </style>
</head>



<body>
  <!---------------------------------------- ここに botan ---------------------------------------->
<div id="home" class="section active">
  <div style="text-align:center;">
  <h1>肩スコア</h1>
  <button onclick="showSection('pain')">＜Pain＞</button>
<div style="height:10px;"></div>  <!-- 高さ10pxの空白 -->
  <button onclick="showSection('adl')">＜ADL＞</button>
<div style="height:10px;"></div>  <!-- 高さ10pxの空白 -->
  <button onclick="showSection('func')">＜Function＞</button>
<div style="height:10px;"></div>  <!-- 高さ10pxの空白 -->
  <button onclick="showSection('str')">＜Strength＞</button>
<div style="height:10px;"></div>  <!-- 高さ10pxの空白 -->
  <button onclick="showSection('rom')">＜ROM＞</button>
<div style="height:10px;"></div>  <!-- 高さ10pxの空白 -->
  <button onclick="showSection('xp')">＜Xp所見＞</button>
<div style="height:10px;"></div>  <!-- 高さ10pxの空白 -->
<button class="redButton" onclick="showResults(); showSection('result')">＜集計＞</button>
<div style="height:10px;"></div>  <!-- 高さ10pxの空白 -->
</div>
</div>
  <!---------------------------------------- ここに ページ ---------------------------------------->


<div id="pain" class="section">
  <h1>Painスコア入力</h1>

  <!-- ASES: VAS入力 -->
  <p>ASES (VAS 0〜10)<br>
    <input type="number" id="asesVAS" min="0" max="10" value="0"> /10
  </p>

  <!-- 他スコア: チェックボックスで1つ選択 -->
  <p>疼痛の程度を選んでください</p>
  <label><input type="radio" name="painLevel" value="0"> 疼痛なし</label><br>
  <label><input type="radio" name="painLevel" value="1"> スポーツ中・重労働で軽い痛み</label><br>
  <label><input type="radio" name="painLevel" value="2"> 労働中に軽い痛み</label><br>
  <label><input type="radio" name="painLevel" value="3"> 日常生活動作で痛み</label><br>
  <label><input type="radio" name="painLevel" value="4"> 耐えられる軽い痛み（夜間痛・鎮痛剤使用）</label><br>
  <label><input type="radio" name="painLevel" value="5"> 強い疼痛（頻繁な夜間痛・鎮痛剤使用）</label><br>
  <label><input type="radio" name="painLevel" value="6"> 上肢を使えない</label><br>

<div style="height:10px;"></div>  <!-- 高さ10pxの空白 -->
<div id="painResult">
  <p>ASES: <span id="asesPainScore">-</span></p>
  <p>JOA: <span id="joaPainScore">-</span></p>
  <p>UCLA: <span id="uclaPainScore">-</span></p>
  <p>Constant: <span id="constantPainScore">-</span></p>
</div>


<div style="height:10px;"></div>  <!-- 高さ10pxの空白 -->
  <button onclick="savePain()">保存</button>
  <div style="height:10px;"></div>  <!-- 高さ10pxの空白 -->
  <button onclick="showSection('home')">閉じる</button>
</div>
</div>   <!-- ← ここで pain セクションを閉じる ------------------------------------------------------------------>

<div id="adl" class="section">
  <div style="text-align:center;">

  <h1>ADLスコア入力</h1>

UCLA 肩機能の満足度<br>
  <label><input type="radio" name="uclaSatisfaction" value="5"> 満足（5点）</label><br>
  <label><input type="radio" name="uclaSatisfaction" value="0"> 不満（0点）</label><br><br>

JOA及びASES<br>
(0=不可 / 1=かなり困難 / 2=やや困難 / 3=容易)<br><br>

<!-- JOA+ASES 共通（6項目） -->
  <fieldset><legend>上着を着る</legend>
    <label><input type="radio" name="adl1" value="0">0</label>
    <label><input type="radio" name="adl1" value="1">1</label>
    <label><input type="radio" name="adl1" value="2">2</label>
    <label><input type="radio" name="adl1" value="3">3</label>
  </fieldset>
  <fieldset><legend>患側を下にして寝る</legend>
    <label><input type="radio" name="adl2" value="0">0</label>
    <label><input type="radio" name="adl2" value="1">1</label>
    <label><input type="radio" name="adl2" value="2">2</label>
    <label><input type="radio" name="adl2" value="3">3</label>
  </fieldset>
  <fieldset><legend>背中を洗う</legend>
    <label><input type="radio" name="adl3" value="0">0</label>
    <label><input type="radio" name="adl3" value="1">1</label>
    <label><input type="radio" name="adl3" value="2">2</label>
    <label><input type="radio" name="adl3" value="3">3</label>
  </fieldset>
  <fieldset><legend>尻を拭く</legend>
    <label><input type="radio" name="adl4" value="0">0</label>
    <label><input type="radio" name="adl4" value="1">1</label>
    <label><input type="radio" name="adl4" value="2">2</label>
    <label><input type="radio" name="adl4" value="3">3</label>
  </fieldset>
  <fieldset><legend>髪をすかす</legend>
    <label><input type="radio" name="adl5" value="0">0</label>
    <label><input type="radio" name="adl5" value="1">1</label>
    <label><input type="radio" name="adl5" value="2">2</label>
    <label><input type="radio" name="adl5" value="3">3</label>
  </fieldset>
  <fieldset><legend>高い所に手が届く</legend>
    <label><input type="radio" name="adl6" value="0">0</label>
    <label><input type="radio" name="adl6" value="1">1</label>
    <label><input type="radio" name="adl6" value="2">2</label>
    <label><input type="radio" name="adl6" value="3">3</label>
  </fieldset>

  <!-- JOA のみ（4項目） -->
  <fieldset><legend>口に手が届く</legend>
    <label><input type="radio" name="adl7" value="0">0</label>
    <label><input type="radio" name="adl7" value="1">1</label>
    <label><input type="radio" name="adl7" value="2">2</label>
    <label><input type="radio" name="adl7" value="3">3</label>
  </fieldset>
  <fieldset><legend>健側腋窩に手が届く</legend>
    <label><input type="radio" name="adl8" value="0">0</label>
    <label><input type="radio" name="adl8" value="1">1</label>
    <label><input type="radio" name="adl8" value="2">2</label>
    <label><input type="radio" name="adl8" value="3">3</label>
  </fieldset>
  <fieldset><legend>上着サイドポケット</legend>
    <label><input type="radio" name="adl9" value="0">0</label>
    <label><input type="radio" name="adl9" value="1">1</label>
    <label><input type="radio" name="adl9" value="2">2</label>
    <label><input type="radio" name="adl9" value="3">3</label>
  </fieldset>
  <fieldset><legend>引き戸開閉</legend>
    <label><input type="radio" name="adl10" value="0">0</label>
    <label><input type="radio" name="adl10" value="1">1</label>
    <label><input type="radio" name="adl10" value="2">2</label>
    <label><input type="radio" name="adl10" value="3">3</label>
  </fieldset>

  <!-- ASES のみ（4項目） -->
  <fieldset><legend>4.5kg持ち上げ</legend>
    <label><input type="radio" name="adl11" value="0">0</label>
    <label><input type="radio" name="adl11" value="1">1</label>
    <label><input type="radio" name="adl11" value="2">2</label>
    <label><input type="radio" name="adl11" value="3">3</label>
  </fieldset>
  <fieldset><legend>ボールをオーバースロー</legend>
    <label><input type="radio" name="adl12" value="0">0</label>
    <label><input type="radio" name="adl12" value="1">1</label>
    <label><input type="radio" name="adl12" value="2">2</label>
    <label><input type="radio" name="adl12" value="3">3</label>
  </fieldset>
  <fieldset><legend>いつも通りの仕事</legend>
    <label><input type="radio" name="adl13" value="0">0</label>
    <label><input type="radio" name="adl13" value="1">1</label>
    <label><input type="radio" name="adl13" value="2">2</label>
    <label><input type="radio" name="adl13" value="3">3</label>
  </fieldset>
  <fieldset><legend>いつも通りのスポーツ・娯楽</legend>
    <label><input type="radio" name="adl14" value="0">0</label>
    <label><input type="radio" name="adl14" value="1">1</label>
    <label><input type="radio" name="adl14" value="2">2</label>
    <label><input type="radio" name="adl14" value="3">3</label>
  </fieldset>

  <div style="text-align:center;">
  <button onclick="saveUclaAdl()">保存</button>
    <button onclick="showSection('home')">閉じる</button>
  </div>

  <!-- 保存後に表示 -->
  <div id="uclaAdlResult">
    <p>UCLA ADL スコア: <span id="uclaAdlScore">-</span></p>
    <p>JOA-ADL: <span id="joaAdlScore">-</span></p>
    <p>ASES-ADL: <span id="asesAdlScore">-</span></p>
  </div>
</div>
</div>   <!-- ← ここで adl セクションを閉じる ------------------------------------------>

<!-- Function セクション -->
<div id="func" class="section">
<div style="text-align:center;">
  <h1>Function（総合機能）</h1>

  <!-- JOA /10 -->
  <fieldset><legend>JOA：90度以下での外転筋力</legend>
    <label><input type="radio" name="joa_muscle" value="5">正常(5)</label>
    <label><input type="radio" name="joa_muscle" value="4">優(4)</label>
    <label><input type="radio" name="joa_muscle" value="3">良(3)</label>
    <label><input type="radio" name="joa_muscle" value="2">可(2)</label>
    <label><input type="radio" name="joa_muscle" value="1">不可(1)</label>
    <label><input type="radio" name="joa_muscle" value="0">ゼロ(0)</label>
  </fieldset>
  <fieldset><legend>JOA：1㎏の伸展・回内・水平保持</legend>
    <label><input type="radio" name="joa_hold" value="5">10秒以上(5)</label>
    <label><input type="radio" name="joa_hold" value="3">3秒以上(3)</label>
    <label><input type="radio" name="joa_hold" value="1">2秒以下(1)</label>
    <label><input type="radio" name="joa_hold" value="0">不可(0)</label>
  </fieldset>

  <!-- Constant /20 -->
  <fieldset><legend>Constant：仕事・家事</legend>
    <label><input type="radio" name="const_work" value="4">支障なし(4)</label>
    <label><input type="radio" name="const_work" value="0">支障あり(0)</label>
  </fieldset>
  <fieldset><legend>Constant：娯楽／スポーツ</legend>
    <label><input type="radio" name="const_sport" value="4">支障なし(4)</label>
    <label><input type="radio" name="const_sport" value="0">支障あり(0)</label>
  </fieldset>
  <fieldset><legend>Constant：睡眠（夜間痛）</legend>
    <label><input type="radio" name="const_sleep" value="2">なし(2)</label>
    <label><input type="radio" name="const_sleep" value="0">あり(0)</label>
  </fieldset>
  <fieldset><legend>Constant：手が届くか</legend>
    <label><input type="radio" name="const_reach" value="10">頭上(10)</label>
    <label><input type="radio" name="const_reach" value="8">頭頂部(8)</label>
    <label><input type="radio" name="const_reach" value="6">口まで(6)</label>
    <label><input type="radio" name="const_reach" value="4">胸まで(4)</label>
    <label><input type="radio" name="const_reach" value="2">腰まで(2)</label>
  </fieldset>

  <!-- UCLA /10 -->
  <fieldset><legend>UCLA：機能</legend>
    <label><input type="radio" name="ucla_func" value="10">正常(10)</label>
    <label><input type="radio" name="ucla_func" value="8">軽度な制限のみ(8)</label>
    <label><input type="radio" name="ucla_func" value="6">家事・買物・運転・衣服着脱可能(6)</label>
    <label><input type="radio" name="ucla_func" value="4">簡単な家事、ほとんどの日常動作可能(4)</label>
    <label><input type="radio" name="ucla_func" value="2">軽い動作のみ可能(2)</label>
    <label><input type="radio" name="ucla_func" value="0">上肢を使えない(1)</label>
  </fieldset>
<div style="height:10px;"></div>  <!-- 高さ10pxの空白 -->
  <button onclick="saveFunction()">保存</button>
<div style="height:10px;"></div>  <!-- 高さ10pxの空白 -->
  <div style="text-align:center;"><button onclick="showSection('home')">閉じる</button></div>

  <!-- 保存後の表示 -->
  <div id="functionResult">
    <p>JOA-Function: <span id="joaFunctionScore">0</span> 点</p>
    <p>Constant-Function: <span id="constantFunctionScore">0</span> 点</p>
    <p>UCLA-Function: <span id="uclaFunctionScore">0</span> 点</p>
  </div>
</div>
</div>   <!-- ← ここで func セクションを閉じる ------------------------------------------>

<!-- Strength セクション（UCLA / Constant） -->
<div id="str" class="section">
<div style="text-align:center;">
  <h1>Strength（筋力）</h1>

  <!-- UCLA (/5) 挙上MMT -->
  <fieldset><legend>UCLA：挙上MMT（0–5）</legend>
    <label><input type="radio" name="ucla_mmt" value="0">0</label>
    <label><input type="radio" name="ucla_mmt" value="1">1</label>
    <label><input type="radio" name="ucla_mmt" value="2">2</label>
    <label><input type="radio" name="ucla_mmt" value="3">3</label>
    <label><input type="radio" name="ucla_mmt" value="4">4</label>
    <label><input type="radio" name="ucla_mmt" value="5">5</label>
  </fieldset>

  <!-- Constant (/25) 外転筋力(kg) → 点数 -->
  <fieldset><legend>Constant：外転筋力（kg）</legend>
    <label><input type="radio" name="const_abdkg" value="25">12kg以上(25)</label>
    <label><input type="radio" name="const_abdkg" value="23">10–11kg(23)</label>
    <label><input type="radio" name="const_abdkg" value="20">8–9kg(20)</label>
    <label><input type="radio" name="const_abdkg" value="17">7kg(17)</label>
    <label><input type="radio" name="const_abdkg" value="14">6kg(14)</label>
    <label><input type="radio" name="const_abdkg" value="11">4–5kg(11)</label>
    <label><input type="radio" name="const_abdkg" value="8">3kg(8)</label>
    <label><input type="radio" name="const_abdkg" value="5">2kg(5)</label>
    <label><input type="radio" name="const_abdkg" value="2">0.5kg(2)</label>
    <label><input type="radio" name="const_abdkg" value="0">0kg(0)</label>
  </fieldset>

  <button onclick="saveStrength()">保存</button>
  <div style="text-align:center;"><button onclick="showSection('home')">閉じる</button></div>

  <!-- 保存後表示 -->
  <div id="strengthResult">
    <p>UCLA-Strength: <span id="uclaStrengthScore">0</span> 点</p>
    <p>Constant-Strength: <span id="constantStrengthScore">0</span> 点</p>
  </div>
</div>

</div>   <!-- ← ここで str セクションを閉じる ------------------------------------------>

<div id="rom" class="section">
  <h1>ROM</h1>

  <!-- 挙上 -->
    ●挙上：
    <label>角度入力: <input type="number" id="elevationInput" min="0" max="180"> °</label>
<br>
    ●外転：
    <label>角度入力: <input type="number" id="abductionInput" min="0" max="180"> °</label>
<br>
<br>
  <!-- Constant 外旋 -->
    ●外旋（Constant)<br>
    <label><input type="checkbox" class="const-er" value="2"> 手は頭後方・肘は前方</label><br>
    <label><input type="checkbox" class="const-er" value="2"> 手は頭後方・肘は広げて</label><br>
    <label><input type="checkbox" class="const-er" value="2"> 手は頭上・肘は前方</label><br>
    <label><input type="checkbox" class="const-er" value="2"> 手は頭上・肘は広げて</label><br>
    <label><input type="checkbox" class="const-er" value="2"> 完全に挙上できる</label><br>

    ●外旋 (JOA)<br>
  <label>
    <input type="radio" name="joa_external" value="9">
    60°以上（9点）
  </label><br>
  <label>
    <input type="radio" name="joa_external" value="6">
    30°以上（6点）
  </label><br>
  <label>
    <input type="radio" name="joa_external" value="3">
    0°以上（3点）
  </label><br>
  <label>
    <input type="radio" name="joa_external" value="1">
    -20°以上（1点）
  </label><br>
  <label>
    <input type="radio" name="joa_external" value="0">
    -20°以下（0点）
  </label>
<br>
  ●内旋 (JOA)<br>
  <label>
    <input type="radio" name="joa_internal" value="6">
    Th12以上（6点）
  </label><br>
  <label>
    <input type="radio" name="joa_internal" value="4">
    L5以上（4点）
  </label><br>
  <label>
    <input type="radio" name="joa_internal" value="2">
    臀部（2点）
  </label><br>
  <label>
    <input type="radio" name="joa_internal" value="0">
    それ以下（0点）
  </label><br>
  ●内旋 (Constant)<br>
  <label>
    <input type="radio" name="constant_internal" value="10">
    肩甲骨間（10点）
  </label><br>
  <label>
    <input type="radio" name="constant_internal" value="8">
    Th12（8点）
  </label><br>
  <label>
    <input type="radio" name="constant_internal" value="6">
    L3（6点）
  </label><br>
  <label>
    <input type="radio" name="constant_internal" value="4">
    L5/S（4点）
  </label><br>
  <label>
    <input type="radio" name="constant_internal" value="2">
    臀部（2点）
  </label><br>
  <label>
    <input type="radio" name="constant_internal" value="0">
    大腿外側（0点）
  </label><br><br>

  
  <!-- ここまでに挙上・外転・外旋・内旋の入力フォームが並ぶ -->

  <p>JOA ROM: <span id="joa-rom-score">0</span></p>
  <p>Constant ROM: <span id="constant-rom-score">0</span></p>
  <p>UCLA ROM: <span id="ucla-rom-score">0</span></p>

<br>
<button onclick="updateRomScores()">保存</button>
<button onclick="showSection('home')">閉じる</button>
</div>   
<!-- ← ここで rom セクションを閉じる -------------------------------------------->


<div id="xp" class="section">
  <h1>Xp評価 (JOAのみ)</h1>

  <!-- X線所見評価 -->
  <h3>IV X線所見評価（5点）</h3>
  <label><input type="radio" name="joa_xp_findings" value="5"> 正常（5点）</label><br>
  <label><input type="radio" name="joa_xp_findings" value="3"> 中等度の変化または亜脱臼（3点）</label><br>
  <label><input type="radio" name="joa_xp_findings" value="1"> 高度の変化または脱臼（1点）</label><br>
  <label><input type="radio" name="joa_xp_findings" value="0"> 評価不能 / 未選択（0点）</label><br><br>

  <!-- 関節安定性 -->
  <h3>V 関節安定性（15点）</h3>
  <label><input type="radio" name="joa_stability" value="15"> 正常（15点）</label><br>
  <label><input type="radio" name="joa_stability" value="10"> 軽度のinstability または脱臼不安感（10点）</label><br>
  <label><input type="radio" name="joa_stability" value="5"> 重度のinstability または亜脱臼の既往・状態（5点）</label><br>
  <label><input type="radio" name="joa_stability" value="0"> 脱臼の既往または状態（0点）</label><br><br>

  <p>JOA Xp合計: <span id="joa-xp-score">0</span></p>

  <button onclick="updateXpScore()">保存</button><br>
  <button onclick="showSection('home')">閉じる</button>
</div>

<!-- ← ここで xp セクションを閉じる -------------------------------------------->




<div id="result" class="section">
  <h1>集計結果</h1>

  <!-- ここにスコアが自動で入る -->
  <div id="resultContent"></div>

  <div style="text-align:center;">
    <button class="redButton" onclick="showSection('home')">閉じる</button>
  </div>
</div>
</div>

  <!---------------------------------------- ここに JavaScript ---------------------------------------->
  <script>
    function showSection(id) {
      document.querySelectorAll('.section').forEach(sec => {
        sec.classList.remove('active');
      });
      document.getElementById(id).classList.add('active');
    }
<!---------------------------------------- 変数の宣言 ---------------------------------------->

let scores = { 
joa:{pain:0,adl:0,function:0,rom:0,Xp:0}, 
ases:{pain:0,adl:0}, 
constant:{pain:0,adl:0,function:0,rom:0,strength:0}, 
ucla:{pain:0,function:0,rom:0,strength:0} };

<!---------------------------------------- Pain集計 ---------------------------------------->

function savePain() {
  // ASES (VAS)
  let asesVAS = parseInt(document.getElementById("asesVAS").value);
  scores.ases.pain = (10 - asesVAS) * 5;  // 10-VAS を 50点満点換算

  // チェックボックスで選んだ painLevel
  let level = document.querySelector('input[name="painLevel"]:checked').value;

  // 対応表
  const table = [
    { joa:30, ucla:10, constant:15 }, // 疼痛なし
    { joa:25, ucla: 8, constant:10 }, // スポーツ中...
    { joa:20, ucla: 6, constant:10 }, // 労働中...
    { joa:15, ucla: 4, constant: 5 }, // 日常生活...
    { joa:10, ucla: 2, constant: 5 }, // 耐えられる...
    { joa: 5, ucla: 1, constant: 0 }, // 強い疼痛...
    { joa: 0, ucla: 0, constant: 0 }  // 上肢を使えない
  ];

  let row = table[level];
  scores.joa.pain = row.joa;
  scores.ucla.pain = row.ucla;
  scores.constant.pain = row.constant;

document.getElementById("asesPainScore").textContent = scores.ases.pain;
document.getElementById("joaPainScore").textContent = scores.joa.pain;
document.getElementById("uclaPainScore").textContent = scores.ucla.pain;
document.getElementById("constantPainScore").textContent = scores.constant.pain;

}

<!---------------------------------------- ADL集計 ---------------------------------------->

function saveUclaAdl() {
  let val = document.querySelector('input[name="uclaSatisfaction"]:checked');
  if (!val) return; // 未選択なら何もしない

  scores.ucla.adl = parseInt(val.value, 10);

  const v = n => {
    const el = document.querySelector(`input[name="${n}"]:checked`);
    return el ? parseInt(el.value,10) : 0;
  };

  const both = ["adl1","adl2","adl3","adl4","adl5","adl6"];
  const joaOnly = ["adl7","adl8","adl9","adl10"];
  const asesOnly = ["adl11","adl12","adl13","adl14"];

  const sum = names => names.reduce((s,n)=>s+v(n),0);

  const joa = sum(both) + sum(joaOnly);
  const ases = sum(both) + sum(asesOnly);

scores.joa.adl = Math.floor(joa/3);
scores.ases.adl = Math.floor(ases*5/3);

document.getElementById("joaAdlScore").textContent = Math.floor(joa/3);
document.getElementById("asesAdlScore").textContent = Math.floor(ases*5/3);


  // 表示更新
  document.getElementById("uclaAdlScore").textContent = scores.ucla.adl;
}
<!---------------------------------------- function集計 ---------------------------------------->
// Function 保存
function saveFunction(){
  const v = name => {
    const el = document.querySelector(`input[name="${name}"]:checked`);
    return el ? parseInt(el.value,10) : 0;
  };

  const joaF = v('joa_muscle') + v('joa_hold');                         // /10
  const constantF = v('const_work') + v('const_sport') +                 // /20
                    v('const_sleep') + v('const_reach');
  const uclaF = v('ucla_func');                                          // /10

  scores.joa.function = joaF;
  scores.constant.function = constantF;
  scores.ucla.function = uclaF;

  document.getElementById('joaFunctionScore').textContent = joaF;
  document.getElementById('constantFunctionScore').textContent = constantF;
  document.getElementById('uclaFunctionScore').textContent = uclaF;
}

// Strength 保存-----------------------------------------------------------------------------------
function saveStrength(){
  const getVal = (name) => {
    const el = document.querySelector(`input[name="${name}"]:checked`);
    return el ? parseInt(el.value,10) : 0;
  };

  const uclaS = getVal('ucla_mmt');       // /5
  const constS = getVal('const_abdkg');   // /25（ラジオ値=点数）

  scores.ucla.strength = uclaS;
  scores.constant.strength = constS;

  document.getElementById('uclaStrengthScore').textContent = uclaS;
  document.getElementById('constantStrengthScore').textContent = constS;
}


// --- 挙上 --------------------------------------------------------------------------------------
document.getElementById("elevationInput").addEventListener("input", e => {
  const deg = parseInt(e.target.value) || 0;
  let joa=0, constant=0, ucla=0;

  if (deg >= 151) { joa=15; constant=10; ucla=5; }
  else if (deg >= 121) { joa=12; constant=8; ucla=4; }
  else if (deg >= 91) { joa=9; constant=6; ucla=3; }
  else if (deg >= 61) { joa=6; constant=4; ucla=2; }
  else if (deg >= 45) { joa=3; constant=2; ucla=2; }
  else if (deg >= 30) { joa=3; constant=2; ucla=1; }
  else { joa=0; constant=0; ucla=0; }

  document.getElementById("joa-elev").textContent = joa;
  document.getElementById("const-elev").textContent = constant;
  document.getElementById("ucla-elev").textContent = ucla;
});
// --- 外転（Constantのみ） ------------------------------------------------------------------------
document.getElementById("abductionInput").addEventListener("input", e => {
  const deg = parseInt(e.target.value) || 0;
  let constant=0;

  if (deg >= 151) { constant=10; }
  else if (deg >= 121) { constant=8; }
  else if (deg >= 91) { constant=6; }
  else if (deg >= 61) { constant=4; }
  else if (deg >= 31) { constant=2; }
  else { constant=0; }

  document.getElementById("const-abd").textContent = constant;
});
// --- Constant 外旋 ------------------------------------------------------------------------------
document.querySelectorAll(".const-er").forEach(cb => {
  cb.addEventListener("change", () => {
    let sum = 0;
    document.querySelectorAll(".const-er:checked").forEach(c => {
      sum += parseInt(c.value);
    });
    document.getElementById("const-er-score").textContent = sum;
  });
});
function updateRomScores() {
  // --- 挙上 ---
  const elevDeg = parseInt(document.getElementById("elevationInput").value) || 0;
  let joaElev=0, constElev=0, uclaElev=0;

  if (elevDeg >= 151) { joaElev=15; constElev=10; uclaElev=5; }
  else if (elevDeg >= 121) { joaElev=12; constElev=8; uclaElev=4; }
  else if (elevDeg >= 91) { joaElev=9; constElev=6; uclaElev=3; }
  else if (elevDeg >= 61) { joaElev=6; constElev=4; uclaElev=2; }
  else if (elevDeg >= 45) { joaElev=3; constElev=2; uclaElev=2; }
  else if (elevDeg >= 30) { joaElev=3; constElev=2; uclaElev=1; }
  else { joaElev=0; constElev=0; uclaElev=0; }

  // --- 外転 (Constantのみ) ---
  const abdDeg = parseInt(document.getElementById("abductionInput").value) || 0;
  let constAbd=0;
  if (abdDeg >= 151) constAbd=10;
  else if (abdDeg >= 121) constAbd=8;
  else if (abdDeg >= 91) constAbd=6;
  else if (abdDeg >= 61) constAbd=4;
  else if (abdDeg >= 31) constAbd=2;

  // --- 外旋 (Constant: checkboxes) ---
  let constER=0;
  document.querySelectorAll(".const-er:checked").forEach(cb => {
    constER += parseInt(cb.value);
  });

  // --- 外旋 (JOA: radio) ---
  let joaER = parseInt(document.querySelector("input[name='joa_external']:checked")?.value || 0);

  // --- 内旋 (JOA: radio) ---
  let joaIR = parseInt(document.querySelector("input[name='joa_internal']:checked")?.value || 0);

  // --- 内旋 (Constant: radio) ---
  let constIR = parseInt(document.querySelector("input[name='constant_internal']:checked")?.value || 0);

  // --- 合計して scores に格納 ---
  scores.joa.rom = joaElev + joaER + joaIR;
  scores.constant.rom = constElev + constAbd + constER + constIR;
  scores.ucla.rom = uclaElev;
  // ASESはROM評価なし（そのまま0）

  // --- 表示更新 ---
  document.getElementById("joa-rom-score").textContent = scores.joa.rom;
  document.getElementById("constant-rom-score").textContent = scores.constant.rom;
  document.getElementById("ucla-rom-score").textContent = scores.ucla.rom;
}
function updateXpScore() {
  let findings = parseInt(document.querySelector("input[name='joa_xp_findings']:checked")?.value || 0);
  let stability = parseInt(document.querySelector("input[name='joa_stability']:checked")?.value || 0);

  let totalXp = findings + stability;
  scores.joa.Xp = totalXp;

  document.getElementById("joa-xp-score").textContent = totalXp;
}

<!---------------------------------------- Total集計 ---------------------------------------->
function showResults() {
  let html = "";

  // ASES
  let ases = scores.ases;
  let asesTotal = Object.values(ases).reduce((a,b)=>a+b,0);
  html += "●ASES<br>";
  for (let key in ases) {
    html += key + ":" + ases[key] + "点、";
  }
  html += "→ 合計 " + asesTotal + "点<br><br>";

  // JOA
  let joa = scores.joa;
  let joaTotal = Object.values(joa).reduce((a,b)=>a+b,0);
  html += "●JOA<br>";
  for (let key in joa) {
    html += key + ":" + joa[key] + "点、";
  }
  html += "→ 合計 " + joaTotal + "点<br><br>";

  // UCLA
  let ucla = scores.ucla;
  let uclaTotal = Object.values(ucla).reduce((a,b)=>a+b,0);
  html += "●UCLA<br>";
  for (let key in ucla) {
    html += key + ":" + ucla[key] + "点、";
  }
  html += "→ 合計 " + uclaTotal + "点<br><br>";

  // Constant
  let constant = scores.constant;
  let constantTotal = Object.values(constant).reduce((a,b)=>a+b,0);
  html += "●Constant<br>";
  for (let key in constant) {
    html += key + ":" + constant[key] + "点、";
  }
  html += "→ 合計 " + constantTotal + "点<br><br>";

  // 出力
  document.getElementById("resultContent").innerHTML = html;
}


  </script>
</body>
</html>






